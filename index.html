<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Painel de Prospec√ß√£o - Augusto</title>
</head>
<body class="bg-slate-900 text-gray-100 p-8">
    <div class="max-w-5xl mx-auto">
        <h1 class="text-3xl font-bold mb-8 text-blue-500 border-b border-slate-700 pb-4">üéØ Leads Marmorarias ES</h1>
        
        <div id="lista-leads" class="grid gap-4">
            <p class="text-gray-500 italic">Aguardando dados do arquivo dados_leads.js...</p>
        </div>
    </div>

    <script src="dados_leads.js"></script>

    <script>
        const container = document.getElementById('lista-leads');

        // MENSAGENS DO AUGUSTO
        const msgSemSite = "Prazer, eu me chamo Augusto, sou especialista em presen√ßa digital para o setor de marmoraria. estava vendo o trabalho de voc√™s aqui no Maps, as pe√ßas de voc√™s s√£o incr√≠veis. Notei que voc√™s ainda n√£o aparecem com um site oficial quando buscamos por marmorarias na regi√£o. Isso acaba fazendo voc√™s perderem or√ßamentos para concorrentes que aparecerem primeiro. Voc√™ se importa se eu enviar um exemplo de Vitrine profissional que eu mesmo desenvolvi, sem compromisso, mostrando como um site profissional mudaria isso?";
        
        const msgComSite = "Prazer, eu me chamo Augusto, sou especialista em presen√ßa digital para o setor de marmoraria. Estava navegando no site de voc√™s e gostei muito do trabalho de voc√™s, mas vi que o site n√£o est√° valorizando o servi√ßo de voc√™s como deveria, especialmente no celular. Voc√™ se importa se eu enviar um exemplo de Vitrine profissional que eu mesmo desenvolvi, sem compromisso, e como ele melhora suas vendas e alavanca seu neg√≥cio?";

        // 2. FUN√á√ÉO QUE DESENHA OS CARDS NA TELA
        function carregarLeads() {
            if (typeof leads !== 'undefined' && leads.length > 0) {
                container.innerHTML = ''; // Limpa o texto de aviso
                
                leads.forEach(lead => {
                    const temSite = lead.site !== "N√£o tem site";
                    const card = document.createElement('div');
                    card.className = "bg-slate-800 p-5 rounded-xl border border-slate-700 flex justify-between items-center hover:border-blue-500 transition-all";
                    
                    card.innerHTML = `
                        <div>
                            <h2 class="text-xl font-bold">${lead.nome}</h2>
                            <p class="text-gray-400 text-sm">üìû ${lead.tel}</p>
                            <p class="text-xs mt-1 ${temSite ? 'text-blue-400' : 'text-yellow-500'} italic">
                                ${temSite ? lead.site : '‚ö†Ô∏è Sem site oficial'}
                            </p>
                        </div>
                        <button onclick="enviar('${lead.tel}', ${temSite})" 
                                class="bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                            Mandar WhatsApp
                        </button>
                    `;
                    container.appendChild(card);
                });
            } else {
                container.innerHTML = '<p class="text-red-400">Nenhum lead encontrado no arquivo dados_leads.js</p>';
            }
        }

        // 3. FUN√á√ÉO DE ENVIO (BLINDADA)
        function enviar(tel, temSite) {
    if (!tel || tel.includes("encontrado")) {
        alert("N√∫mero inv√°lido.");
        return;
    }

    // 1. Limpeza total: remove tudo que n√£o √© n√∫mero
    let telLimpo = tel.replace(/\D/g, ''); 

    // 2. CORRE√á√ÉO DO ZERO: Se o n√∫mero come√ßar com '0', ele remove o primeiro d√≠gito
    if (telLimpo.startsWith('0')) {
        telLimpo = telLimpo.substring(1);
    }

    // 3. Garante o 55 do Brasil
    // Se ap√≥s tirar o zero sobrarem 10 ou 11 d√≠gitos, colocamos o 55
    if (telLimpo.length === 10 || telLimpo.length === 11) {
        telLimpo = "55" + telLimpo;
    }

    const msgFinal = temSite ? msgComSite : msgSemSite;
    const url = "https://wa.me/" + telLimpo + "?text=" + encodeURIComponent(msgFinal);
    
    window.open(url, '_blank');
}

        // Inicia a lista assim que a p√°gina abre
        carregarLeads();
    </script>
</body>
</html>